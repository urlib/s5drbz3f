//校验邮箱的正则表达式
var emailReg=/^(\w-*)+(\.?(\w-*)+)+@(\w-*)+(\.(\w-*)+)+/,phoneReg=/^\d{6,12}$/,canVote=!0,mDown=!1;$(function(){var f=$("html")[0].lang;$.ajaxDirect({type:"GET",url:urlMap.contactus.contactInfo,loadingType:"0",afterFn:function(a){if("zh"==f){$(document).attr("title",a[1].title);var c=template("contact1_mob",a[1]);document.getElementById("contact1_mob_zh").innerHTML=c;a=template("contact1_web",a[1]);document.getElementById("contact1_web_zh").innerHTML=a}else"ja"==f&&($(document).attr("title",a[0].title),c=template("contact1_mob",a[0]),document.getElementById("contact1_mob_jp").innerHTML=c,a=template("contact1_web",a[0]),document.getElementById("contact1_web_jp").innerHTML=a)}});var b="";$.ajaxDirect({type:"get",url:urlMap.buysim.optionCode,async:!1,afterFn:function(a){b=a.area_code["#options"];a=Object.keys(b);for(var c=a.length,e="",d=0;d<c;d++)e+='\x3coption value\x3d"'+b[a[d]]+'"\x3e'+b[a[d]]+"\x3c/option\x3e";$("#numberId").append(e)},error:function(a){console.log("\u56fd\u5bb6\u533a\u53f7\u6570\u636e\u914d\u7f6e\u6709\u95ee\u9898\uff01")}});$("#numberId").editableSelect({filter:!0,onSelect:function(){$("#tip1").css("display","none");$("#numberId").css("border","1px solid #cccccc")},onHide:function(){if(mDown)if(mDown=!1,""==$("#numberId").val())$("#numberId").css("border","1px solid #e81111"),$("#numberId").siblings("#tip1").children("span").css("display","block");else if(""!=$("#numberId").val())if(void 0==$(".es-list li[class\x3dselected]").attr("value"))$("#numberId").css("border","1px solid #e81111"),$("#numberId").siblings("#tip1").children("span").css("display","block");else{var a=$(".es-list li[class\x3dselected]").text();$("#numberId").val()!=a?($("#numberId").css("border","1px solid #e81111"),$("#numberId").siblings("#tip1").children("span").css("display","block")):""==$("#phone").val()||phoneReg.test($("#phone").val())||($("#phone").css("border","1px solid #e81111"),$("#phone").siblings("#tip2").children("span").css("display","block"))}}});var g=$("#name,#theme");g.blur(function(){var a=$(this).val();valIsNotEmpty(a)?($(this).next().children("span").css("display","none"),$(this).css("border","1px solid #cccccc"),$(this).parent("li").children("i").css("top","45%")):($(this).next().children("span").css("display","block"),$(this).css("border","1px solid #e81111"),$(this).parent("li").css("margin-bottom","3%"),$(this).parent("li").children("i").css("top","28%"))});g.focus(function(){$(this).next().children("span").css("display","none");$(this).css("border","1px solid #cccccc")});$("#email").blur(function(){valIsNotEmpty($(this).val())?emailReg.test($(this).val())?($(this).siblings().children("span").css("display","none"),$(this).css("border","1px solid #cccccc"),$(this).parent("li").children("i").css("top","45%")):($(this).next().next().children("span").css("display","block"),$(this).css("border","1px solid #e81111"),$(this).parent("li").css("margin-bottom","3%"),$(this).parent("li").children("i").css("top","28%")):($(this).next().children("span").css("display","block"),$(this).css("border","1px solid #e81111"),$(this).parent("li").css("margin-bottom","3%"),$(this).parent("li").children("i").css("top","28%"))});$("#email").focus(function(){$(this).siblings().children("span").css("display","none");$(this).css("border","1px solid #cccccc")});$("#substance").blur(function(){valIsNotEmpty($("#substance").val())?($(this).next().children("span").css("display","none"),$(this).css("border","1px solid #cccccc"),$(this).parent("li").children("i").css("top","45%")):($(this).next().children("span").css("display","block"),$(this).css("border","1px solid #e81111"),$(this).parent("li").css("margin-bottom","3%"),$(this).parent("li").children("i").css("top","28%"))});$("#substance").focus(function(){$(this).next().children("span").css("display","none");$(this).css("border","1px solid #cccccc")});$("#numberId").focus(function(){mDown=!0;$(this).siblings().children("span").css("display","none");$(this).next().next().children("span").css("display","none");$(this).css("border","1px solid #cccccc")});$("#phone").focus(function(){$(this).siblings().children("span").css("display","none");$(this).css("border","1px solid #cccccc");$(this).parent("li").children("i").css("top","45%")});$("#phone").blur(function(){valIsNotEmpty($("#phone").val())&&(phoneReg.test($("#phone").val())?($(this).siblings().children("span").css("display","none"),$(this).css("border","1px solid #cccccc"),$(this).parent("li").children("i").css("top","45%")):($(this).siblings("#tip2").children("span").css("display","block"),$(this).css("border","1px solid #e81111"),$(this).parent("li").css("margin-bottom","3%"),$(this).parent("li").children("i").css("top","28%")))});$("#send").click(function(){var a=$("#name").val(),c=$("#theme").val(),e=$("#substance").val(),d=$("#email").val();if(!valIsNotEmpty(a))return $("html, body").animate({scrollTop:$("#name").offset().top-100},100),$("#name").next().children("span").css("display","block"),$("#name").css("border","1px solid #e81111"),$("#name").parent("li").css("margin-bottom","3%"),$("#name").parent("li").children("i").css("top","28%"),!1;var b="00";if(valIsNotEmpty($("#phone").val())){if(!phoneReg.test($("#phone").val()))return $("html, body").animate({scrollTop:$("#phone").offset().top-100},100),$(this).siblings("#tip2").children("span").css("display","block"),$(this).css("border","1px solid #e81111"),$(this).parent("li").css("margin-bottom","3%"),$(this).parent("li").children("i").css("top","28%"),!1;if(""==$("#numberId").val())return $("html, body").animate({scrollTop:$("#numberId").offset().top-100},100),$("#numberId").css("border","1px solid #e81111"),$("#numberId").siblings("#tip1").children("span").css("display","block"),!1;if(""!=$("#numberId").val()){if(void 0==$(".es-list li[class\x3dselected]").attr("value")){$("html, body").animate({scrollTop:$("#numberId").offset().top-100},100);$("#numberId").css("border","1px solid #e81111");$("#numberId").siblings("#tip1").children("span").css("display","block");return}b=$(".es-list li[class\x3dselected]").text();if($("#numberId").val()!=b){$("html, body").animate({scrollTop:$("#numberId").offset().top-100},100);$("#numberId").css("border","1px solid #e81111");$("#numberId").siblings("#tip1").children("span").css("display","block");return}}b=$("#numberId").val()+" "+$("#phone").val()}if(!valIsNotEmpty(d))return $("html, body").animate({scrollTop:$("#email").offset().top-100},100),$("#email").next().children("span").css("display","block"),$("#email").css("border","1px solid #e81111"),$("#email").parent("li").css("margin-bottom","3%"),$("#email").parent("li").children("i").css("top","28%"),!1;if(!emailReg.test(d))return $("html, body").animate({scrollTop:$("#email").offset().top-100},100),$("#email").next().next().children("span").css("display","block"),$("#email").css("border","1px solid #e81111"),$("#email").parent("li").css("margin-bottom","3%"),$("#email").parent("li").children("i").css("top","28%"),!1;if(!valIsNotEmpty(c))return $("html, body").animate({scrollTop:$("#theme").offset().top-100},100),$("#theme").next().children("span").css("display","block"),$("#theme").css("border","1px solid #e81111"),$("#theme").parent("li").css("margin-bottom","3%"),$("#theme").parent("li").children("i").css("top","28%"),!1;if(!valIsNotEmpty(e))return $("html, body").animate({scrollTop:$("#substance").offset().top-100},100),$("#substance").next().children("span").css("display","block"),$("#substance").css("border","1px solid #e81111"),$("#substance").parent("li").css("margin-bottom","3%"),$("#substance").parent("li").children("i").css("top","28%"),!1;a={names:a,phone:b,theme:c,content:e,email:d};canVote&&(canVote=!1,$.ajax({type:"POST",url:urlMap.contactus.submit,data:JSON.stringify(a),beforeSend:function(){$(".btn-bg-mo").attr("disabled","true")},success:function(a){canVote=!0;window.location.href="ja"==f?"/jp/contactus/complete":"/jp/zh/contactus/complete"}}))})});