/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/
!function(){function x(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function C(a,b){function c(a){return v+=a.split(/\n/).length-1,l&&(a=a.replace(/[\n\r\t\s]+/g," ").replace(/\x3c!--.*?--\x3e/g,"")),a&&(a=m[1]+x(a)+m[2]+"\n"),a}function e(a){var c=v;if(f?a=f(a,b):d&&(a=a.replace(/\n/g,function(){return v++,"$line\x3d"+v+";"})),0===a.indexOf("\x3d")){var e=n&&!/^=[=#]/.test(a);(a=a.replace(/^=[=#]?|[\s;]*$/g,""),e)?(e=a.replace(/\s*\([^\)]+\)/,""),q[e]||/^(include|print)$/.test(e)||(a="$escape("+a+")")):a="$string("+a+")";a=m[1]+a+m[2]}return d&&(a="$line\x3d"+c+";"+a),z(a.replace(E,"").replace(F,",").replace(G,"").replace(H,"").replace(I,"").split(/^$|,+/),function(a){a&&!p[a]&&(r+=a+"\x3d"+("print"===a?t:"include"===a?u:q[a]?"$utils."+a:A[a]?"$helpers."+a:"$data."+a)+",",p[a]=!0)}),a+"\n"}var d=b.debug,g=b.closeTag,f=b.parser,l=b.compress,n=b.escape,v=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},k="".trim,m=k?["$out\x3d'';","$out+\x3d",";","$out"]:["$out\x3d[];","$out.push(",");","$out.join('')"],k=k?"$out+\x3dtext;return $out;":"$out.push(text);",t="function(){var text\x3d''.concat.apply('',arguments);"+k+"}",u="function(filename,data){data\x3ddata||$data;var text\x3d$utils.$include(filename,data,$filename);"+k+"}",r="'use strict';var $utils\x3dthis,$helpers\x3d$utils.$helpers,"+(d?"$line\x3d0,":""),w=m[0],k="return new String("+m[3]+");";z(a.split(b.openTag),function(a){a=a.split(g);var b=a[0],d=a[1];1===a.length?w+=c(b):(w+=e(b),d&&(w+=c(d)))});k=r+w+k;d&&(k="try{"+k+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+x(a)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')};}");try{var B=new Function("$data","$filename",k);return B.prototype=q,B}catch(y){throw y.temp="function anonymous($data,$filename) {"+k+"}",y;}}var d=function(a,b){return"string"==typeof b?n(b,{filename:a}):r(a,b)};d.version="3.0.0";d.config=function(a,b){l[a]=b};var l=d.defaults={openTag:"\x3c%",closeTag:"%\x3e",escape:!0,cache:!0,compress:!1,parser:null},p=d.cache={};d.render=function(a,b){return n(a,b)};var r=d.renderFile=function(a,b){var c=d.get(a)||t({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(p[a])b=p[a];else if("object"==typeof document){var c=document.getElementById(a);c&&(b=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,""),b=n(b,{filename:a}))}return b};var u=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?u(a.call(a)):""),a},J={"\x3c":"\x26#60;","\x3e":"\x26#62;",'"':"\x26#34;","'":"\x26#39;","\x26":"\x26#38;"},K=function(a){return J[a]},L=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},q=d.utils={$helpers:{},$include:r,$string:u,$escape:function(a){return u(a).replace(/&(?![\w#]+;)|[<>"']/g,K)},$each:function(a,b){var c,d;if(L(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)}};d.helper=function(a,b){A[a]=b};var A=d.helpers=q.$helpers;d.onerror=function(a){var b="Template Error\n\n",c;for(c in a)b+="\x3c"+c+"\x3e\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var t=function(a){return d.onerror(a),function(){return"{Template Error}"}},n=d.compile=function(a,b){function c(c){try{return new g(c,h)+""}catch(D){return b.debug?t(D)():(b.debug=!0,n(a,b)(c))}}b=b||{};for(var d in l)void 0===b[d]&&(b[d]=l[d]);var h=b.filename;try{var g=C(a,b)}catch(f){return f.filename=h||"anonymous",f.name="Syntax Error",t(f)}return c.prototype=g.prototype,c.toString=function(){return g.toString()},h&&b.cache&&(p[h]=c),c},z=q.$each,E=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,F=/[^\w$]+/g,G=new RegExp(""+("\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,"\\b|\\b")+"\\b"),"g"),H=/^\d[^,]*|,\d[^,]*/g,I=/^,+|,+$/g;l.openTag="{{";l.closeTag="}}";l.parser=function(a,b){a=a.replace(/^\s/,"");var c=a.split(" "),e=c.shift(),h=c.join(" ");switch(e){case "if":a="if("+h+"){";break;case "else":c="if"===c.shift()?" if("+c.join(" ")+")":"";a="}else"+c+"{";break;case "/if":a="}";break;case "each":var e=c[0]||"$data",h=c[2]||"$value",g=c[3]||"$index";"as"!==(c[1]||"as")&&(e="[]");a="$each("+e+",function("+(h+","+g)+"){";break;case "/each":a="});";break;case "echo":a="print("+h+");";break;case "print":case "include":a=e+"("+c.join(",")+");";break;default:if(-1!==h.indexOf("|")){g=b.escape;0===a.indexOf("#")&&(a=a.substr(1),g=!1);c=0;e=a.split("|");h=e.length;for(g=(g?"$escape":"$string")+"("+e[c++]+")";h>c;c++)var f=e[c].split(":"),l=f.shift(),f=f.join(":")||"",g=(f&&(f=", "+f),"$helpers."+l+"("+g+f+")");a="\x3d#"+g}else a=d.helpers[e]?"\x3d#"+e+"("+c.join(",")+");":"\x3d"+a}return a};"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}();